<%- include ('../partials/header') %>
<style>
    .containershop {
  display: flex;
  margin-left: 3%;
  margin-right: auto;
  width: fit-content;
}
    .nextto{
        margin-left: auto;
        margin-right: auto;
        display: table-row;

    }

    .filtre{
        display: block;
        width: 170px;
        

        
}

.filtre h5{
        text-align: center;
        background-color: lightgray;
        padding: 10;        
}

    .filtre ul{
        list-style-type: none;
        text-align: left;
        padding: 0 10 10 10;
}

.filtre ul li a{
    color: black;
       text-align: left;
}

</style>


<div class="containershop" >


   
    <div class="px-4 mt-5 nextto filtre">

        <!--Fitre-->
        <h5>Filtre</h5>
        <form action="/boutique">

            <ul>
            
                <li>
                    <input class="input_" id="checkvetement" type="checkbox"  onclick ="loadDoc()">
                    <label class="input" for="checkvetement">Vêtement</label>
                </li>
                <li>
                    <input class="input" id="checkmaquette" type="checkbox" onclick ="loadDoc()">
                    <label class="input" for="checkmaquette">Maquette</label>
                </li>
                <li>
                    <input class="input" id="checksouvenir" type="checkbox" onclick ="loadDoc()">
                    <label class="input" for="checksouvenir">Souvenir</label>
                </li>
                <li>
                    <input class="input" id="checkeducatif" type="checkbox" onclick ="loadDoc()">
                    <label class="input" for="checkeducatif">Educatif</label>
                </li>
                <li>
                    <input type="button" value="Effacer Filtre" class="btn btn-primary my-2" style="background-color: #182030;" onclick ="EffacerFiltre ()"></input>
                </li>
            </ul> 
        </form>
    </div>

<% if (items !=undefined && items.length>0) {%>
<!-- Section-->
<section class="nextto">
    <div class="container px-4 px-lg-5 mt-5">
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            <% items.forEach(function(item,index){ %>
                <div  class="col mb-5 <%= item.tags%> shopElement" >
                    <div class="card h-100">
                        <!-- Product image-->
                        <img class="card-img-top" src="<%= item.image%>" alt="..." />
                        <!-- Product details-->
                        <div class="card-body p-4">
                            <div class="text-center">
                                <!-- Product name-->
                                <h5 class="fw-bolder " style="line-height: 1em;"><%= item.titre%></h5>
                                <!-- Productdescription-->
                                    <p><%= item.desc%></p>
                                <!-- Product price-->
                                <p>$ <%= item.prix%></p>
                                
                            </div>
                        </div>
                        <!-- Product actions-->
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                            <div class="text-center"><a class="btn btn-primary my-2" style="background-color: #182030;" onclick="addToCart('<%= item._id%>')">Ajouter au panier </a></div>
                        </div>
                    </div>
                </div>
            <%}); %>
        </div>
    </div>
    </section>

    <% }else {%>
    <section class="py-5 text-center container" id="noData">
      <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto">
          <h1 class="fw-light">Aucune donnée trouvée.</h1>
          <a href="/" class="btn btn-primary my-2" style="background-color: #182030;">Retour à l'accueil</a>
          </p>
        </div>
      </div>
    </section>
    <% } %>
</div>
<%- include ('../partials/footer') %>

<script>
function EffacerFiltre(){
    var element = document.getElementsByTagName('input');
    for (let i = 0; i < element.length; i++) {
        console.debug(element[i].type)
        if(element[i].type === 'checkbox'){
            //console.debug(element[i].type)
            console.debug("IN LOOP")

            element[i].checked = false;
            console.debug(element[i].checked)

        }
        
    }

    loadDoc();
}

   function loadDoc(){
    
    
    // add obj habit-------
    if(document.getElementById("checkvetement").checked){
        var element = document.getElementsByClassName('habit');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "block";
       }
    }
     // add obj habit
    else{
        var element = document.getElementsByClassName('habit');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "none";
       }
    }

    // add obj miniature-------
    if(document.getElementById("checkmaquette").checked){
        var element = document.getElementsByClassName('miniature');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "block";
       }
    }
     // add obj miniature
    else{
        var element = document.getElementsByClassName('miniature');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "none";
       }
    }

    // add obj goodie----------
     if(document.getElementById("checksouvenir").checked){
        var element = document.getElementsByClassName('goodie');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "block";
       }
    }
    // add obj goodie
    else{
        var element = document.getElementsByClassName('goodie');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "none";
       }
    }

    // add obj education-------
    if(document.getElementById("checkeducatif").checked){
        var element = document.getElementsByClassName('education');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "block";
       }
    }
    // add obj education
    else{
        var element = document.getElementsByClassName('education');

       for (let i = 0; i < element.length; i++) {
        element[i].style.display = "none";
       }
    } 
    
    if(!document.getElementById("checkvetement").checked && !document.getElementById("checkmaquette").checked && !document.getElementById("checkeducatif").checked && !document.getElementById("checksouvenir").checked){
    
        var element = document.getElementsByClassName('shopElement');

        for (let i = 0; i < element.length; i++) {
        element[i].style.display = "block";
}
   }
}

</script>
<script>
    function addToCart(id){
        sessionStorage.setItem(sessionStorage.length, id);
        location.reload();
    }
</script>


