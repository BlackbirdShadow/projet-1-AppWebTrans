<%- include ('../partials/header') %>

<style>
  .bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }

  @media (min-width: 768px) {
    .bd-placeholder-img-lg {
      font-size: 3.5rem;
    }
  }
</style>

<% if (items !=undefined && items.length>0) {%>

<main>

<section class="py-5 text-center container">
<div class="row py-lg-5">
  <div class="col-lg-6 col-md-8 mx-auto">
    <h1 class="fw-light">Activitées du moment</h1>
    <p class="lead text-muted">Ici, vous pourrez découvrir nos activités, 
      experiences et autres joyeusetées en lien avec l'espace, 
      l'univers ou encore la magie des astres.</p>
    <p>
      <a href="/expositions" class="btn btn-primary my-2" style="background-color: #182030;">Voir les expositions</a>
      <a href="/billeterie" class="btn btn-secondary my-2">Reserver en ligne</a>
    </p>
  </div>
</div>
</section>

<div class="album py-5 bg-light">
<div class="container">

  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

    <% items.forEach(function(item,index){ %>

    <div class="col">
      <div class="card shadow-sm">
        <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" 
        role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
          <title>Placeholder</title>
          <rect width="100%" height="100%" fill="#55595c"/>
          <text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text>
          <image xlink:href="<%= item.image %>" 
          x="0" y="0" style="max-width:700px; height:250px;"/>
        </svg>

        <div class="card-body">
          <h5><%= item.Titre %></h5>
          <p class="card-text"><%= item.desc %></p>
          <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
              <button type="button" class="btn btn-sm btn-outline-secondary" id="Click_<%= item._id%>">Détails</button>
            </div>
            <small class="text-muted"><%= item.duree %> minutes</small>
          </div>
          <p class="card-text" id="details_<%= item._id%>" style="display: none;">
            Venir le <%= item.date_debut.getDate()%>/<%= item.date_debut.getUTCMonth()+1%>/<%= item.date_debut.getFullYear()%> 
            à <%= item.date_debut.getHours()%>H<%= item.date_debut.getMinutes()%>;<br>
            Salle <%= item.salle%>.
          </p>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      document.getElementById("Click_<%= item._id%>").onclick = function() {
        if (document.getElementById("details_<%= item._id%>").style.display == "none"){
          document.getElementById("details_<%= item._id%>").style.display = "block";
        } else {
          document.getElementById("details_<%= item._id%>").style.display = "none";
        }
      }
    </script>

    <%}); %>
    
  </div>
</div>
</div>

<% }else {%>
  <section class="py-5 text-center container">
    <div class="row py-lg-5">
      <div class="col-lg-6 col-md-8 mx-auto">
        <h1 class="fw-light">Aucune donnée trouvée.</h1>
          <a href="/" class="btn btn-primary my-2" style="background-color: #182030;">Retour à l'accueil</a>
        </p>
      </div>
    </div>
    </section>
<% } %>

</main>
<br><br><br><br>

<%- include ('../partials/footer') %>