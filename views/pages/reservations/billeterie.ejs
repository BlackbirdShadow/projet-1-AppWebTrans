<%- include ('../../partials/header') %>

<style>
  input, select, a, label, button{
      font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
  }
  input { 
    text-align: center; 
  }
  select{
    width: 80px;
    margin: 10px;
  }
  input + span {
    padding-right: 30px;
  }
  table{
    width: 100%;
  }
  table, thead, th, tr { 
    border-bottom: 1px solid lightgray; 
    padding: 5px;
  }
  
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    var email;

    $("#submit").click(function () {

      email = $("#email").val();

      if (email.includes("@")) {

        $.post("/billeterie", { email: email }, function (data) {
          if (data === 'done') {
            window.location.href = "/";
          }
          if (data === 'error') {
            alert('Email incorrect');
          }
        });

      }
    });

  });

  document.getElementById("+").onclick = function () {
    document.getElementById("nombre").value = parseInt(document.getElementById("nombre").value)+1;
  }
</script>

<% if (items !=undefined && items.length>0) {%>
  <br/>
  <form style="margin-left: 20px; width: 50%;">
    <input type="date">
    <input type="time" min="08:00:00" max="18:00:00" step="600">
    <span class="validity"></span>
    <hr>

    <table>
      <tr>
        <th>
          QUANTITÉ
        </th>
      </tr>

      <% items.forEach(function(item,index) { %>
      <tr>
        <td>
          <select id="ticket_0">
            <% for (var j = 0; j <= 20;  j++ ) { %>
            <option value="<%= j %>"><%= j %></option>
            <% } %>
          </select>
          <%= item.titre%>
        </td>
        <td>
          <%= item.prix%> $ CA
        </td>
      </tr>
      <%}); %>

      <tr>
        <td>
          <table style="width: 20%; margin: 10px;">
            <tr>
              <td><label for="rdv">rdv etoiles</label></td>
              <td><input id="rdv" type="checkbox"></td>
            </tr>

            <tr>
              <td><label for="film">rdv </label></td>
              <td><input id="film" type="checkbox"></td>
            </tr>            
          </table>
        </td>
      </tr>
      
    </table>

    <hr>
    <input type="text" size="50" placeholder="" id="" required> 
    <hr>
    <input type="text" size="50" placeholder="" id="" required>
    <hr>
    <input type="email" size="50" placeholder="email" id="email" required> 
    <hr>
    <input type="text" size="50" placeholder="" id="" required> 
    <hr>
    <input type="tel" size="50" placeholder="" id="" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}"> 
    <small>optionnel</small>
    <hr>
    <input type="submit" value="Reserver" id="submit" class="">
    <hr>
  </form>


<% }else {%>
  <section class="py-5 text-center container">
    <div class="row py-lg-5">
      <div class="col-lg-6 col-md-8 mx-auto">
        <h1 class="fw-light">Aucune donnée trouvée.</h1>
        <a href="/" class="btn btn-primary my-2" style="background-color: #182030;">Retour à l'accueil</a>
        </p>
      </div>
    </div>
  </section>
<% } %>
 
<%- include ('../../partials/footer') %>